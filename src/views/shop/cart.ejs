<%- include('../includes/head'); %>
    <body>

        <%- include('../includes/navigation'); %>

        <main class="cart">
            <h1 class="cart__header"><%= pageTitle %></h1> 

            <% if (hasProducts === true) { %>
                <div class="cart__modal-wrapper">

                    <ul class="cart__modal-rows">
                        <li class="cart__modal-header">
                            <p class="cart__modal-column">Name</p>
                            <p class="cart__modal-column">Quantity</p>
                            <p class="cart__modal-column">Cost</p>
                        </li>
                        <%  products.forEach((product) => {    %>
                            <li class="cart__modal-row">
                                <p class="cart__modal-column"><%= product.title %></p>
                                <p class="cart__modal-column"><%= product.quantity %></p>
                                <p class="cart__modal-column">£<%= product.price * product.quantity %></p>
                                <form class="cart__modal-column" action="/cart-delete-item" method="POST">
                                    <button class="cart__modal-button" type="submit">X</button>
                                    <input type="hidden" name="productId" value=<%= `${product.id}` %>/>
                                </form>
                            </li>
                        <%  }); %>
                    </ul>

                    <div class="cart__checkout">
                        <p class="cart__checkout-text">Total Price : £<%= totalPrice %></p>
                        <button class="cart__checkout-button">Checkout</button>
                    </div>

                </div>
            <% } else { %>

                <h2 class="cart__empty-items">Your cart is empty</h2>

            <% } %>
        </main>

    </body>
<%- include('../includes/end'); %>